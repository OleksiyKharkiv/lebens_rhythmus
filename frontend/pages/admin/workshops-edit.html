<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8"/>
    <title>Manage Workshops — Admin</title>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <link rel="stylesheet" href="../../styles/main.css"/>
    <link rel="stylesheet" href="../../styles/dashboard.css"/>
    <link rel="stylesheet" href="../../styles/workshops.css"/>
    <link rel="stylesheet" href="../../styles/admin-workshops.css"/>
</head>
<body>
<!-- header/footer injected by partials -->
<main class="container" style="padding:1.5rem;">
    <h1>Workshops — Manage</h1>
    <p>List, edit, publish and add groups to workshops.</p>

    <section style="display:grid;grid-template-columns: 1fr 420px; gap:1rem; margin-top:1rem;">
        <!-- LEFT: list + filters -->
        <div class="dash-card">
            <div style="display:flex;justify-content:space-between;align-items:center;">
                <h2>Existing Workshops</h2>
                <div>
                    <select id="filterStatus" aria-label="Filter status">
                        <option value="ALL">All</option>
                        <option value="PUBLISHED">Published</option>
                        <option value="DRAFT">Draft</option>
                        <option value="ARCHIVED">Archived</option>
                    </select>
                    <input id="searchWorkshop" placeholder="Search..." style="margin-left:8px;"/>
                </div>
            </div>

            <div id="workshopsList" style="margin-top:1rem;max-height:60vh;overflow:auto;">
                <!-- JS renders workshop items: each item shows title, dates, status, actions -->
            </div>
        </div>

        <!-- RIGHT: create/edit -->
        <aside class="dash-card">
            <h2 id="formTitle">Create new workshop</h2>
            <form id="workshopForm" autocomplete="off">
                <input type="hidden" id="workshopId"/>
                <label>Title
                    <input id="wTitle" required/>
                </label>
                <label>Short description
                    <textarea id="wDescription" rows="3"></textarea>
                </label>
                <div style="display:flex;gap:0.5rem;flex-wrap:wrap;">
                    <label>Start <input type="date" id="wStart" required/></label>
                    <label>End <input type="date" id="wEnd"/></label>
                    <label>Price (€) <input type="number" id="wPrice" step="0.01" min="0"/></label>
                    <label>Max participants <input type="number" id="wMax" min="1"/></label>
                </div>
                <div style="display:flex;gap:0.5rem;flex-wrap:wrap;margin-top:0.5rem;">
                    <label>Teacher
                        <select id="wTeacher">
                            <option value="">— none —</option>
                        </select>
                    </label>
                    <label>Venue
                        <select id="wVenue">
                            <option value="">— none —</option>
                        </select>
                    </label>
                    <label>Language
                        <select id="wLanguage">
                            <option value="">default</option>
                        </select>
                    </label>
                </div>

                <div style="display:flex;gap:0.5rem;margin-top:0.75rem;">
                    <button class="btn btn-primary" type="submit" id="saveWorkshopBtn">Save</button>
                    <button type="button" class="btn" id="clearWorkshopBtn">Reset</button>
                    <button type="button" class="btn" id="openGroupsBtn" style="margin-left:auto;">Open Groups</button>
                </div>
            </form>

            <div id="workshopFormResult" style="margin-top:0.75rem;"></div>
        </aside>
    </section>

    <!-- Groups section (toggleable) -->
    <section id="workshopGroupsPanel" style="display:none;margin-top:1rem;">
        <div class="dash-card">
            <h2>Groups for: <span id="groupsWorkshopTitle"></span></h2>
            <form id="groupCreateForm" style="margin-top:0.5rem;">
                <input type="hidden" id="groupsWorkshopId"/>
                <div style="display:flex;gap:0.5rem;flex-wrap:wrap;">
                    <label>Title <input id="gTitle" required/></label>
                    <label>Capacity <input id="gCapacity" type="number" min="1" value="10"/></label>
                    <label>Start <input id="gStart" type="datetime-local"/></label>
                    <label>End <input id="gEnd" type="datetime-local"/></label>
                    <label>Teacher <select id="gTeacher">
                        <option value="">— none —</option>
                    </select></label>
                </div>
                <div style="margin-top:0.5rem;">
                    <button class="btn btn-primary" type="submit">Add group</button>
                    <button type="button" class="btn" id="closeGroupsPanel">Close</button>
                </div>
            </form>

            <div id="groupsListContainer" style="margin-top:1rem;"></div>
        </div>
    </section>
</main>

<script src="../../js/main.js"></script>
<script src="../../js/partials-loader.js"></script>
<script src="../../js/admin-workshop.js"></script>
</body>
</html>